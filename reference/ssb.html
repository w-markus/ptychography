
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Single Side Band &#8212; Ptychography 4.0 0.1.0rc3 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Stitching" href="stitching.html" />
    <link rel="prev" title="Reference" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-ptychography40.reconstruction.ssb">
<span id="single-side-band"></span><h1>Single Side Band<a class="headerlink" href="#module-ptychography40.reconstruction.ssb" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="ptychography40.reconstruction.ssb.SSB_UDF">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">ptychography40.reconstruction.ssb.</span></code><code class="sig-name descname"><span class="pre">SSB_UDF</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">lamb</span></em>, <em class="sig-param"><span class="pre">dpix</span></em>, <em class="sig-param"><span class="pre">semiconv</span></em>, <em class="sig-param"><span class="pre">semiconv_pix</span></em>, <em class="sig-param"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></em>, <em class="sig-param"><span class="pre">cy=None</span></em>, <em class="sig-param"><span class="pre">cx=None</span></em>, <em class="sig-param"><span class="pre">transformation=None</span></em>, <em class="sig-param"><span class="pre">cutoff=1</span></em>, <em class="sig-param"><span class="pre">method='subpix'</span></em>, <em class="sig-param"><span class="pre">mask_container=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ptychography40/reconstruction/ssb/udf.html#SSB_UDF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ptychography40.reconstruction.ssb.SSB_UDF" title="Permalink to this definition">¶</a></dt>
<dd><p>UDF to perform ptychography using the single side band (SSB) method <span id="id1">[<a class="reference internal" href="../index.html#id14">PLY+15</a>]</span>.</p>
<dl class="py method">
<dt id="ptychography40.reconstruction.ssb.SSB_UDF.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">lamb</span></em>, <em class="sig-param"><span class="pre">dpix</span></em>, <em class="sig-param"><span class="pre">semiconv</span></em>, <em class="sig-param"><span class="pre">semiconv_pix</span></em>, <em class="sig-param"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></em>, <em class="sig-param"><span class="pre">cy=None</span></em>, <em class="sig-param"><span class="pre">cx=None</span></em>, <em class="sig-param"><span class="pre">transformation=None</span></em>, <em class="sig-param"><span class="pre">cutoff=1</span></em>, <em class="sig-param"><span class="pre">method='subpix'</span></em>, <em class="sig-param"><span class="pre">mask_container=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ptychography40/reconstruction/ssb/udf.html#SSB_UDF.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ptychography40.reconstruction.ssb.SSB_UDF.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lamb</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The illumination wavelength in m. The function <code class="xref py py-meth docutils literal notranslate"><span class="pre">ptychography40.common.wavelength()</span></code>
allows to calculate the electron wavelength as a function of acceleration voltage.</p></li>
<li><p><strong>dpix</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>Iterable</em><em>(</em><em>y</em><em>, </em><em>x</em><em>)</em>) – STEM pixel size in m</p></li>
<li><p><strong>semiconv</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – STEM semiconvergence angle in radians</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – dtype to perform the calculation in</p></li>
<li><p><strong>semiconv_pix</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Diameter of the primary beam in the diffraction pattern in pixels</p></li>
<li><p><strong>cy</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>optional</em>) – Position of the optical axis on the detector in px, center of illumination.
Default: Center of the detector</p></li>
<li><p><strong>cx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>optional</em>) – Position of the optical axis on the detector in px, center of illumination.
Default: Center of the detector</p></li>
<li><p><strong>transformation</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)"><em>numpy.ndarray</em></a><em>(</em><em>) </em><em>of shape</em><em> (</em><em>2</em><em>, </em><em>2</em><em>) or </em><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – Transformation matrix to apply to shift vectors. This allows to adjust for scan rotation
and mismatch of detector coordinate system handedness, such as flipped y axis for MIB.</p></li>
<li><p><strong>cutoff</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Minimum number of pixels in a trotter</p></li>
<li><p><strong>method</strong> (<em>'subpix'</em><em> or </em><em>'shift'</em>) – Method to use for generating the mask stack</p></li>
<li><p><strong>mask_container</strong> (<em>MaskContainer</em>) – Allows to pass in a precomputed mask stack when using with single thread live data
or with an inline executor as a work-around. The number of masks is sanity-checked
to match the other parameters.
The proper fix is <a class="reference external" href="https://github.com/LiberTEM/LiberTEM/issues/335">https://github.com/LiberTEM/LiberTEM/issues/335</a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="ptychography40.reconstruction.ssb.generate_masks">
<code class="sig-prename descclassname"><span class="pre">ptychography40.reconstruction.ssb.</span></code><code class="sig-name descname"><span class="pre">generate_masks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reconstruct_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">semiconv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">semiconv_pix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'subpix'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ptychography40/reconstruction/ssb/trotters.html#generate_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ptychography40.reconstruction.ssb.generate_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the trotter mask stack.</p>
<p>The y dimension is trimmed to size(y)//2 + 1 to exploit the inherent
symmetry of the mask stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reconstruct_shape</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>)</em>) – Shape of the reconstructed area</p></li>
<li><p><strong>mask_shape</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>)</em>) – Shape of the detector</p></li>
<li><p><strong>dtype</strong> (<em>numpy dtype</em>) – dtype to use for the mask stack</p></li>
<li><p><strong>lamb</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Wavelength of the illuminating radiation in m</p></li>
<li><p><strong>dpix</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>(</em><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>)</em>) – Scan step in m. Tuple (y, x) in case scan step is different in x and y direction.</p></li>
<li><p><strong>semiconv</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Semiconvergence angle of the illumination in radians</p></li>
<li><p><strong>semiconv_pix</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Semiconvergence angle in measured in detector pixel, i.e. radius of the zero order disk.</p></li>
<li><p><strong>transformation</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)"><em>numpy.ndarray</em></a><em>, </em><em>optional</em>) – Matrix for affine transformation from the scan coordinate directions
to the detector coordinate directions. This does not include the scale, which is handled by
dpix, lamb, semiconv and semiconv_pix. It should only be used to rotate and flip
the coordinate system as necessary. See also
<a class="reference external" href="https://github.com/LiberTEM/LiberTEM/blob/master/src/libertem/corrections/coordinates.py">https://github.com/LiberTEM/LiberTEM/blob/master/src/libertem/corrections/coordinates.py</a></p></li>
<li><p><strong>cy</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>optional</em>) – Position of the optical axis on the detector in px, center of illumination.
Default: Center of the detector</p></li>
<li><p><strong>cx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>optional</em>) – Position of the optical axis on the detector in px, center of illumination.
Default: Center of the detector</p></li>
<li><p><strong>cutoff</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum number of pixels in the positive and negative trotter. This can be used to purge
very small trotters to reduce noise. Default is 1, i.e. no cutoff unless one trotter is
empty.</p></li>
<li><p><strong>cutoff_freq</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Trotters belonging to a spatial frequency higher than this value in reciprocal pixel
coordinates will be cut off.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – Can be <code class="code docutils literal notranslate"><span class="pre">'subpix'`(default)</span> <span class="pre">or</span> <span class="pre">:code:</span></code>’shift’` to switch between
<code class="xref py py-meth docutils literal notranslate"><span class="pre">mask_pair_subpix()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">mask_pair_shift()</span></code> to generate a trotter pair.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>masks</strong> – Masks in sparse.pydata.org COO format. y and x frequency index are FFT shifted, i.e. the
zero frequency is at (0,0) and negative frequencies are in the far quadrant and reversed.
The y frequency index is cut in half with size(y)//2 + 1 to exploit the inherent symmetry
of a real-valued Fourier transform. The y and x index are then flattened to make it
suitable for using it with MaskContainer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sparse.COO</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ptychography40.reconstruction.ssb.get_results">
<code class="sig-prename descclassname"><span class="pre">ptychography40.reconstruction.ssb.</span></code><code class="sig-name descname"><span class="pre">get_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">udf_result</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ptychography40/reconstruction/ssb/udf.html#get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ptychography40.reconstruction.ssb.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Derive real space wave front from Fourier space</p>
<p>To be included in UDF after <a class="reference external" href="https://github.com/LiberTEM/LiberTEM/issues/628">https://github.com/LiberTEM/LiberTEM/issues/628</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>udf_result</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>libertem.common.buffers.BufferWrapper</em><em>]</em>) – Result from running <a class="reference internal" href="#ptychography40.reconstruction.ssb.SSB_UDF" title="ptychography40.reconstruction.ssb.SSB_UDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSB_UDF</span></code></a> with a LiberTEM Context</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>reconstruction</strong> – Reconstruction result in real space as complex numbers.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms.html">Algorithms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Single Side Band</a></li>
<li class="toctree-l2"><a class="reference internal" href="stitching.html">Stitching</a></li>
<li class="toctree-l2"><a class="reference internal" href="common.html">Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasing.html">Releasing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Reference</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Reference</a></li>
      <li>Next: <a href="stitching.html" title="next chapter">Stitching</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019-2020, Ptychography 4.0 Authors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reference/ssb.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>